function imgOp(){$(window).width()>1024?$(".img-op").each(function(a,b){var c=$(this).attr("img-full");$(this).css("background-image","url("+c+")"),$(this).removeClass("img-op")}):$(window).width()<=1024&&$(".img-op").each(function(a,b){var c=$(this).attr("img-large");$(this).css("background-image","url("+c+")"),$(this).removeClass("img-op")})}function wheel(){$(".timeline .wheel").length&&($(".wheel li").click(function(a){a.preventDefault(),$(this).hasClass("active")||($(".wheel li.active").removeClass("active"),$(this).addClass("active"),$(".display .image-wrap").css("background-image","url("+$(this).attr("data-image")+")"),$(".display h3").html('<span class="txt-orange">'+$(this).attr("data-year")+":</span> "+$(this).attr("data-headline")),$(".display p").html(""+$(this).attr("data-description")))}),$(".arrow").click(function(a){a.preventDefault(),$(this).hasClass("hide")||($(this).hasClass("up")?$(".list-wrap li").first().hasClass("in")||($(".arrow.down.hide").removeClass("hide"),$(".wheel .list-wrap").attr("data-scroll",""+(parseInt($(".wheel .list-wrap").attr("data-scroll"))+86)),$(".wheel .list-wrap").css("transform","translateY("+$(".wheel .list-wrap").attr("data-scroll")+"px)"),$(".list-wrap .in").first().prev().addClass("in"),$(".list-wrap .in").last().removeClass("in"),$(".list-wrap li").first().hasClass("in")&&$(".arrow.up").addClass("hide")):$(this).hasClass("down")&&($(".list-wrap li").last().hasClass("in")||($(".arrow.up.hide").removeClass("hide"),$(".wheel .list-wrap").attr("data-scroll",""+(parseInt($(".wheel .list-wrap").attr("data-scroll"))-86)),$(".wheel .list-wrap").css("transform","translateY("+$(".wheel .list-wrap").attr("data-scroll")+"px)"),$(".list-wrap .in").first().removeClass("in"),$(".list-wrap .in").last().next().addClass("in"),$(".list-wrap li").last().hasClass("in")&&$(".arrow.down").addClass("hide"))))}))}function wheelMobile(){$(".timeline .wheel").length&&($(window).width()<=1024&&1==$(".display").length?($(".wheel li").each(function(a,b){0==a?($(".display .image-wrap").css("background-image","none"),$(".display .image-wrap").append('<img src="'+$(this).attr("data-image")+'"" alt="'+$(this).attr("data-headline")+'"/>'),$(".display h3").html('<span class="txt-orange">'+$(this).attr("data-year")+":</span> "+$(this).attr("data-headline")),$(".display p").html(""+$(this).attr("data-description"))):($(".display.original").clone().addClass("display"+a).removeClass("original").appendTo(".timeline .flex"),$(".display"+a+" .image-wrap").css("background-image","none"),$(".display"+a+" .image-wrap img").attr({src:$(this).attr("data-image"),alt:$(this).attr("data-headline")}),$(".display"+a+" h3").html('<span class="txt-orange">'+$(this).attr("data-year")+":</span> "+$(this).attr("data-headline")),$(".display"+a+" p").html(""+$(this).attr("data-description")))}),$(".wheel li.active").removeClass("active")):$(window).width()>1024&&$(".display").length>1&&($(".display").each(function(a,b){$(this).hasClass("original")||$(this).remove()}),$(".display img").remove(),$(".wheel li").first().click()))}function map(){$(".map-container").length&&$(".map-container").click(function(){$(this).find(".wpgmza_map").addClass("clicked")}).mouseleave(function(){$(this).find(".wpgmza_map").removeClass("clicked")})}function nav(){$(".nav-btn .ham").click(function(a){$(this).toggleClass("open"),$("nav").toggleClass("active")})}function navHide(){setInterval(function(){didScroll&&(hasScrolled(),didScroll=!1)},250)}function hasScrolled(){var a=$(this).scrollTop();Math.abs(lastScrollTop-a)<=delta||(a>lastScrollTop&&a>navbarHeight?$("header").removeClass("nav-down").addClass("nav-up"):a+$(window).height()<$(document).height()&&$("header").removeClass("nav-up").addClass("nav-down"),lastScrollTop=a)}function heroSlider(){$(".slider-dots .dot").click(function(a){$(".slider-dots .dot.active").removeClass("active"),$(".slides .slide.active").removeClass("active"),$(this).addClass("active"),$('.slides .slide[data-index="'+$(this).attr("data-index")+'"]').addClass("active"),$(window).width()>1024?$('.slides .slide[data-index="'+$(this).attr("data-index")+'"]').each(function(a,b){var c=$(this).attr("img-full");$(this).css("background-image","url("+c+")"),$(this).removeClass("img-op")}):$(window).width()<=1024&&$('.slides .slide[data-index="'+$(this).attr("data-index")+'"]').each(function(a,b){var c=$(this).attr("img-large");$(this).css("background-image","url("+c+")"),$(this).removeClass("img-op")})})}function reveals(){$(".rev").length>0&&$(".rev").each(function(a,b){$(window).scrollTop()+$(window).height()/3*2>$(this).closest("section").offset().top&&($(this).removeClass("rev"),$(this).hasClass("statistics")&&counter())})}function counter(){$(".counter").each(function(){var a=$(this),b=a.attr("data-count");$({countNum:a.text()}).animate({countNum:b},{duration:2e3,easing:"linear",step:function(){a.text(Math.floor(this.countNum))},complete:function(){a.text(this.countNum)}})})}function projectSort(){$(".projects .cat-menu .btn").click(function(a){$(".projects .cat-menu .btn.active").removeClass("active"),$(this).addClass("active"),$(this).attr("data-cat")!=$(".map-wrap").attr("data-cat")||$(".map-wrap").hasClass("active")?$(this).attr("data-cat")==$(".map-wrap").attr("data-cat")&&$(".map-wrap").hasClass("hidden")?($(".map-wrap").removeClass("hidden"),getProjects($(this).attr("data-cat"))):$(this).attr("data-cat")!=$(".map-wrap").attr("data-cat")&&($(".map-wrap").addClass("hidden"),getProjects($(this).attr("data-cat"))):($(".map-wrap").removeClass("hidden"),$(".map-wrap").addClass("active").html($(".map-wrap").attr("data-iframe")),getProjects($(this).attr("data-cat")))})}function projectInit(){$(".projects .tile").click(function(a){})}function getProjects(a){$(".projects .grid.flex").html(""),$(".loader").addClass("active"),$.get(wpJSON+"projects?categories="+a,function(a){if($(".loader").removeClass("active"),a.length>0)$.each(a,function(){var a='<div class="tile txt-white" data-cat="'+this.categories.toString()+'">';if(a+='<div class="image-bg top" style="background-image:url('+this.featured_image_src+');">',a+='<div class="overlay flex">',a+='<div class="inner-wrap">',a+="<h2>"+this.title.rendered+"</h2>",a+="<h3>"+this.acf.location+"</h3>",a+='<div class="dn description">'+this.content.rendered+"</div>",this.acf.gallery_images){a+='<div class="gallery-images dn">';for(var b=0;b<this.acf.gallery_images.length;b++)a+='<div class="img" data-url="'+this.acf.gallery_images[b].image+'"></div>';a+="</div>"}a+='<div class="btn">View Project</div>',a+="</div></div></div></div>",$(".projects .grid.flex").append(a)});else var b='<h2 class="tac db">Sorry, no posts were found.</h2>';$(".projects .grid.flex").append(b),projectInit()})}var didScroll,lastScrollTop=0,delta=5,navbarHeight=$("header").outerHeight(),wpJSON=window.location.origin+"/kelsey-construction/wp-json/wp/v2/";$(document).ready(function(){imgOp(),wheel(),wheelMobile(),map(),nav(),navHide(),heroSlider(),reveals(),projectSort()}),$(document).scroll(function(a){didScroll=!0,reveals()}),$(window).resize(function(a){wheelMobile()});